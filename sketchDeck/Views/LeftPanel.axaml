<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:vm="clr-namespace:sketchDeck.ViewModels"
             xmlns:models="clr-namespace:sketchDeck.Models"
             x:Class="sketchDeck.Views.LeftPanel"
             x:DataType="vm:LeftPanelViewModel">

        <Grid Margin="0,15,0,0">
            <Grid.RowDefinitions>
                <RowDefinition Height="*" MinHeight="150" />
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="*" MinHeight="160"/>
                <RowDefinition Height="*" MinHeight="50" MaxHeight="50"/>
            </Grid.RowDefinitions>
            <Border Grid.Row="0" BorderBrush="#3C3C3C" BorderThickness="1" CornerRadius="6" Padding="12" Margin="10,0,0,0" BoxShadow="0 2 6 #80000000">
                <DockPanel>
                    <TextBlock Text="Collections" FontSize="14" FontWeight="Bold" DockPanel.Dock="Top" Margin="0,0,0,8"/>

                    <ScrollViewer VerticalScrollBarVisibility="Auto" HorizontalScrollBarVisibility="Disabled">

                        <ListBox x:Name="CollectionsList" BorderThickness="0" DragDrop.AllowDrop="True" SelectionMode="Single"
                                 ItemsSource="{Binding Parent.Collections}" SelectedIndex="{Binding Parent.SelectedCollection}">
                                <ListBox.ItemTemplate>
                                        <DataTemplate DataType="models:CollectionItem">
                                                <Grid ColumnDefinitions="*,Auto,Auto" ColumnSpacing="8" MinHeight="30" MaxHeight="30">
                                                    <TextBlock Grid.Column="0" Text="{Binding Name}" TextTrimming="CharacterEllipsis" Foreground="White" FontSize="13" MinWidth="50" HorizontalAlignment="Stretch" VerticalAlignment="Center"
                                                               IsVisible="{Binding !IsEditing}" DoubleTapped="OnNameDoubleTapped"/>
                                                    <TextBox Grid.Column="0" Text="{Binding Name, Mode=TwoWay}" IsVisible="{Binding IsEditing}" KeyDown="EditTextBox_KeyDown" LostFocus="EditTextBox_LostFocus"/>
                                                    <TextBlock Grid.Column="1" Text="{Binding Leng}" FontSize="12" VerticalAlignment="Center"/>
                                                    <Button Classes="CollectionDeleteBtn" Grid.Column="2" CornerRadius="6" Height="24" Width="24" HorizontalAlignment="Right" VerticalAlignment="Center"
                                                            Click="DeleteCollection_Click">
                                                        <Path Fill="White" Stroke="White" StrokeThickness="0"
                                                              Data="M.42-1H5.28V.62H.42V-1ZM3.9953 7.1 5.4274 5.6679 4.2821 4.5226 2.85 5.9547 1.4179 4.5226.2726 5.6679 1.7047 7.1.2726 8.5321 1.4179 9.6774 2.85 8.2453 4.2821 9.6774 5.4274 8.5321 3.9953 7.1ZM7.71 2.24v9.72H-2.01V2.24H7.71ZM6.9.62V-1.81a.81.81 90 00-.81-.81H-.39a.81.81 90 00-.81.81V.62H-5.25V2.24h1.62V12.77a.81.81 90 00.81.81H8.52a.81.81 90 00.81-.81V2.24h1.62V.62H6.9Z"/>
                                                    </Button>
                                                </Grid>
                                        </DataTemplate>
                            </ListBox.ItemTemplate>
                        </ListBox>
                    </ScrollViewer>
                </DockPanel>
            </Border>

            <GridSplitter Grid.Row="1" Height="15" Background="Transparent" ResizeDirection="Rows" ResizeBehavior="PreviousAndNext"/>

            <Border Grid.Row="2" Margin="10,0,0,0" BorderThickness="0">
                <Grid RowDefinitions="Auto,Auto,Auto">

                    <WrapPanel Grid.Row="0" Orientation="Horizontal" ItemSpacing="8" HorizontalAlignment="Left" ItemHeight="36">
                        <ComboBox Width="133" MinHeight="28" MaxHeight="28" FontSize="12" Cursor="Hand" Margin="0,4,0,0" Foreground="White" BorderBrush="#444" CornerRadius="6"
                                  ItemsSource="{Binding Views}" SelectedItem="{Binding Parent.SelectedView, Mode=TwoWay}"/>

                        <Button Width="28" Height="28" Cursor="Hand" CornerRadius="6" ToolTip.Tip="Add Files"
                                Click="OpenFilesButton_Clicked">
                            <Grid>
                                <Path Data="M 10 -1 H -2 C -2 -1 -3 -1 -3 0 V 16 C -3 16 -3 17 -2 17 H 12 C 13 17 13 16 13 16 V 4 L 10 -1"
                                      Stroke="White" StrokeThickness="1.3" StrokeJoin="Round"/>
                                <Path Data="M 5 4 V 12 M 1 8 H 9"
                                      Stroke="White" StrokeThickness="1.3" StrokeLineCap="Round"/>
                            </Grid>
                        </Button>

                        <Button Width="28" Height="28" Cursor="Hand" CornerRadius="6" ToolTip.Tip="Add Folders"
                                Click="OpenFolderButton_Clicked" >
                            <Grid>
                                <Path Data="M -4 -1 h 7 l 6.003 2 H 14 c 0.6628 0 0.785 0.438 1 1 v 14 c 0 0.6628 -0.5372 1.2 -1 1 H -3 c -0.6627 0 -2 0 -2 -2 V 0 c 0 0 0 -1 1 -1"
                                      Stroke="White" StrokeThickness="1.3" StrokeJoin="Round"/>
                                <Path Data="M 5 4 V 12 M 1 8 H 9"
                                      Stroke="White" StrokeThickness="1.3" StrokeLineCap="Round"/>
                            </Grid>
                        </Button>

                        <Button Width="133" Height="28" Cursor="Hand" FontSize="12" Content="Create" Background="#3A6EA5" BorderBrush="#3A6EA5" Foreground="White" CornerRadius="6" ToolTip.Tip="Create new collection" HorizontalContentAlignment="Center"
                                Click="CreateCollection_Click" />
                    </WrapPanel>

                    <TextBox Grid.Row="1" Watermark="Search..." Height="28" FontSize="12" Margin="0,6,0,7" Padding="7" Foreground="White" BorderBrush="#444" CornerRadius="6"
                             Text="{Binding Parent.SearchTerm, UpdateSourceTrigger=Default}"/>

                        <Grid Grid.Row="2" ColumnDefinitions="Auto,8,*,8,Auto" Height="36" Margin="0">
                            <Button Grid.Column="0" Width="28" Height="28" Cursor="Hand" Background="#4CAF50" BorderBrush="#4CAF50" Foreground="White" CornerRadius="6" ToolTip.Tip="Start Session"
                                    Click="StartSessionButton_Clicked">
                                <Path Data="M -1 -1 L 14 9 L -1 17 Z" Fill="White"/>
                            </Button>
                            <Grid Grid.Column="1"/>
                            <TextBox Grid.Column="2" MinWidth="48" MinHeight="28" MaxHeight="28" FontSize="12" Watermark="Seconds" CornerRadius="6"
                                     ToolTip.Tip="Time for one image in Seconds. 0 or empty = infinite"
                                     Text="{Binding TimeImage, Mode=TwoWay}"/>
                            <Grid Grid.Column="3"/>
                            <CheckBox Grid.Column="4" x:Name="ShuffleCheck" Width="28" Height="28" Foreground="White" Cursor="Hand" CornerRadius="6" Margin="0" Padding="0"
                                      ToolTip.Tip="Randomizes the order of Images"
                                      IsChecked="{Binding IsShuffled, Mode=TwoWay}" />
                        </Grid>
                </Grid>
            </Border>
            <ToggleButton Grid.Row="3" Width="28" Height="28" HorizontalAlignment="Left" VerticalAlignment="Bottom" Background="#FF2B2B2B" BorderThickness="0" CornerRadius="6" Margin="10,0,0,10"
                          ToolTip.Tip="Always on Top" Foreground="White" IsCheckedChanged="AlwaysOnTop_Click">
                <Viewbox Stretch="Uniform" Width="20" Height="20">
                    <Path Data="m102 133c-17.6 0-32-14.4-32-32s14.4-32 32-32 32 14.4 32 32-14.4 32-32 32m89.6-64c-12.8-36.8-48-64-89.6-64-52.8 0-96 43.2-96 96s43.2 96 96 96c41.6 0 76.8-27.2 89.6-64h54.4v64h64v-64h48v-64h-166.4z"
                          Fill="White"/>
                </Viewbox>
            </ToggleButton>
        </Grid>

</UserControl>
